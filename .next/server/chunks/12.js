"use strict";exports.id=12,exports.ids=[12],exports.modules={12:(t,e,s)=>{s.d(e,{D:()=>useMutation});var i=s(9885),r=s(9520),n=s(4218),u=s(8818),o=s(834);let MutationObserver=class MutationObserver extends o.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let s=this.options;this.options=this.client.defaultMutationOptions(t),(0,r.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,n.R)(),e="loading"===t.status,s={...t,isLoading:e,isPending:e,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(t){u.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,s,i,r,n,u,o,a;t.onSuccess?(null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(i=(r=this.mutateOptions).onSettled)||i.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(n=(u=this.mutateOptions).onError)||n.call(u,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(a=this.mutateOptions).onSettled)||o.call(a,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(({listener:t})=>{t(this.currentResult)})})}};var a=s(1214),l=s(212),h=s(4713);function useMutation(t,e,s){let n=(0,r.lV)(t,e,s),o=(0,l.NL)({context:n.context}),[c]=i.useState(()=>new MutationObserver(o,n));i.useEffect(()=>{c.setOptions(n)},[c,n]);let d=(0,a.$)(i.useCallback(t=>c.subscribe(u.V.batchCalls(t)),[c]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p=i.useCallback((t,e)=>{c.mutate(t,e).catch(noop)},[c]);if(d.error&&(0,h.L)(c.options.useErrorBoundary,[d.error]))throw d.error;return{...d,mutate:p,mutateAsync:d.mutate}}function noop(){}}};