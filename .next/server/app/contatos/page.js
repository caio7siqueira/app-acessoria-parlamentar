(()=>{var e={};e.id=340,e.ids=[340],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},951:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c});var a=t(7096),s=t(6132),n=t(7284),o=t.n(n),i=t(2564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let c=["",{children:["contatos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7060)),"/workspaces/app-acessoria-parlamentar/src/app/contatos/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2594)),"/workspaces/app-acessoria-parlamentar/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/app-acessoria-parlamentar/src/app/contatos/page.tsx"],u="/contatos/page",m={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/contatos/page",pathname:"/contatos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3767:(e,r,t)=>{Promise.resolve().then(t.bind(t,4400))},4400:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ContatosPage});var a=t(784),s=t(3993),n=t(6658),o=t(3682);let i=(0,o.createClient)("https://ivoxmhxcssydnfgormwn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml2b3htaHhjc3N5ZG5mZ29ybXduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMzUwMDYsImV4cCI6MjA3NzgxMTAwNn0.NLzp7E7pyyNPTmdXn63dQExDAA88bTTsyccB_Ba_CJM");let ContatosService=class ContatosService{static async buscarTodos(e){let r=i.from("contatos").select("*").order("secretaria",{ascending:!0});e&&(r=r.or(`secretaria.ilike.%${e}%,nome_responsavel.ilike.%${e}%`));let{data:t,error:a}=await r;if(a)throw Error(`Erro ao buscar contatos: ${a.message}`);return t||[]}static async buscarPorId(e){let{data:r,error:t}=await i.from("contatos").select("*").eq("id",e).single();if(t){if("PGRST116"===t.code)return null;throw Error(`Erro ao buscar contato: ${t.message}`)}return r}static async buscarPorSecretaria(e){let{data:r,error:t}=await i.from("contatos").select("*").eq("secretaria",e).order("nome_responsavel",{ascending:!0});if(t)throw Error(`Erro ao buscar contatos da secretaria: ${t.message}`);return r||[]}static async criar(e){let{data:r,error:t}=await i.from("contatos").insert(e).select().single();if(t)throw Error(`Erro ao criar contato: ${t.message}`);return r}static async atualizar(e,r){let{data:t,error:a}=await i.from("contatos").update(r).eq("id",e).select().single();if(a)throw Error(`Erro ao atualizar contato: ${a.message}`);return t}static async excluir(e){let{error:r}=await i.from("contatos").delete().eq("id",e);if(r)throw Error(`Erro ao excluir contato: ${r.message}`)}static async obterSecretarias(){let{data:e,error:r}=await i.from("contatos").select("secretaria").order("secretaria",{ascending:!0});if(r)throw Error(`Erro ao buscar secretarias: ${r.message}`);let t=[...new Set(e?.map(e=>e.secretaria)||[])];return t}static gerarLinkWhatsApp(e,r){let t=e.replace(/\D/g,""),a=r?encodeURIComponent(r):"";return`https://wa.me/55${t}${a?`?text=${a}`:""}`}static async copiarTelefone(e){try{await navigator.clipboard.writeText(e)}catch(t){let r=document.createElement("textarea");r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}}};var l=t(9885),c=t.n(l),d=t(467),u=t(9458),m=t(2201),g=t(5718),x=t(6243);let p=(0,l.createContext)(null);function Accordion({children:e,type:r="single",value:t,defaultValue:s,onValueChange:n,className:o}){let i=void 0!==t,c=(0,l.useMemo)(()=>{let e=(i?t:s)??("multiple"===r?[]:"");return new Set(Array.isArray(e)?e:e?[e]:[])},[t,s,i,r]),[u,m]=(0,l.useState)(c),g=i?new Set(Array.isArray(t)?t:t?[t]:[]):u,x=(0,l.useRef)([]),registerTrigger=e=>{x.current.includes(e)||x.current.push(e)},h=(0,l.useCallback)(e=>{i||m(e),n?.("multiple"===r?Array.from(e):Array.from(e)[0]??"")},[i,n,r]),toggleItem=e=>{let t=new Set(g);"single"===r?t.has(e)?t.clear():(t.clear(),t.add(e)):t.has(e)?t.delete(e):t.add(e),h(t)},y=(0,l.useMemo)(()=>({type:r,openItems:g,toggleItem,registerTrigger,triggers:x}),[r,g]);return a.jsx("div",{className:(0,d.cn)("w-full",o),children:a.jsx(p.Provider,{value:y,children:e})})}function AccordionItem({value:e,children:r,className:t}){let s=(0,l.useId)(),n=`${s}-region`,o=`${s}-header`,i=(0,l.useContext)(p);if(!i)throw Error("AccordionItem must be used within Accordion");let u=i.openItems.has(e);return a.jsx("div",{className:(0,d.cn)("border border-gray-200 dark:border-neutral-700 rounded-xl bg-white dark:bg-neutral-800",t),children:c().Children.map(r,r=>c().isValidElement(r)?c().cloneElement(r,{__accordion:{value:e,open:u,toggle:i.toggleItem,regionId:n,headerId:o,registerTrigger:i.registerTrigger,triggers:i.triggers}}):r)})}function AccordionTrigger({children:e,className:r,__accordion:t}){let s=(0,l.useRef)(null),{value:n,open:o,toggle:i,regionId:c,headerId:m,registerTrigger:g,triggers:x}=t;return(0,l.useEffect)(()=>{s.current&&g(s.current)},[g]),(0,a.jsxs)("button",{ref:s,id:m,"aria-controls":c,"aria-expanded":o,onClick:()=>i(n),onKeyDown:e=>{let r=x.current,t=r.indexOf(s.current);"ArrowDown"===e.key?(e.preventDefault(),r[(t+1)%r.length]?.focus()):"ArrowUp"===e.key?(e.preventDefault(),r[(t-1+r.length)%r.length]?.focus()):"Home"===e.key?(e.preventDefault(),r[0]?.focus()):"End"===e.key&&(e.preventDefault(),r[r.length-1]?.focus())},className:(0,d.cn)("w-full flex items-center justify-between gap-3 p-4 text-left rounded-xl","active:bg-gray-50 dark:active:bg-neutral-700",r),children:[a.jsx("span",{className:"flex-1 min-w-0",children:e}),a.jsx(u.Z,{className:(0,d.cn)("w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform",o&&"rotate-180")})]})}function AccordionContent({children:e,className:r,__accordion:t}){let{open:s,regionId:n,headerId:o,toggle:i,value:c}=t,u=(0,m.c)(0),[p,h]=(0,l.useState)(!1);return a.jsx(g.M,{initial:!1,children:s&&a.jsx(x.E.div,{id:n,role:"region","aria-labelledby":o,initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:(0,d.cn)("overflow-hidden border-t border-gray-200 dark:border-neutral-700",r),children:(0,a.jsxs)(x.E.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragStart:()=>h(!0),onDragEnd:(e,r)=>{h(!1),r.offset.y>50&&i(c)},style:{y:u},className:(0,d.cn)("p-4 touch-pan-y",p&&"cursor-grabbing"),children:[a.jsx("div",{className:"flex justify-center mb-2 md:hidden",children:a.jsx("div",{className:"w-10 h-1 bg-gray-300 dark:bg-neutral-600 rounded-full"})}),e]})})})}var h=t(5735),y=t(4312),b=t(7420),f=t(9518),j=t(3680),v=t(3482),w=t(4571),k=t(9490);function ContatosPage(){let[e,r]=(0,y._)("contatos_busca",""),[t,o]=(0,y._)("contatos_secretaria",""),{data:i}=(0,s.a)({queryKey:["contatos","secretarias"],queryFn:()=>ContatosService.obterSecretarias()}),{data:l,isLoading:c,refetch:d,isRefetching:u}=(0,s.a)({queryKey:["contatos",e,t],queryFn:async()=>{let r=await ContatosService.buscarTodos(e);return t?r.filter(e=>e.secretaria===t):r}}),handleCall=e=>window.location.href=`tel:${e}`,handleEmail=e=>window.location.href=`mailto:${e}`,handleWhatsApp=e=>{let r=e.replace(/\D/g,"");window.open(`https://wa.me/55${r}`,"_blank")};return a.jsx(n.c,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-900 pb-24 safe-area-bottom",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 px-4 py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Agenda de Contatos"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seus contatos organizados"})]}),a.jsx("button",{onClick:()=>d(),disabled:u,className:"p-2 min-h-[44px] text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-lg transition-colors active:scale-95","aria-label":"Atualizar contatos",children:a.jsx(b.Z,{className:`w-5 h-5 ${u?"animate-spin":""}`})})]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar contato...",value:e,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-neutral-700 rounded-xl bg-gray-50 dark:bg-neutral-800 text-base text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all mobile-input"})]}),i&&i.length>0&&a.jsx("div",{className:"pb-1",children:a.jsx(h.h,{items:["",...i],value:t,onChange:e=>o(e??""),placeholder:"Filtrar por secretaria (opcional)",ariaLabel:"Filtro de secretaria"})})]}),a.jsx("div",{className:"px-4 py-4",children:c?a.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-4 animate-pulse border border-gray-100 dark:border-neutral-700",children:[a.jsx("div",{className:"h-6 bg-gray-200 dark:bg-neutral-700 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-neutral-700 rounded w-1/2 mb-3"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-neutral-700 rounded w-2/3"})]},e))}):l?.length===0?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(j.Z,{className:"w-8 h-8 text-gray-400"})}),a.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-lg font-medium",children:"Nenhum contato encontrado"}),a.jsx("p",{className:"text-gray-400 dark:text-gray-400 text-sm mt-1",children:"Tente ajustar sua busca"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:a.jsx(Accordion,{type:"multiple",className:"contents",children:l?.map((e,r)=>a.jsx(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*r,duration:.2},children:a.jsxs(AccordionItem,{className:"bg-white dark:bg-neutral-800 border border-gray-100 dark:border-neutral-700 overflow-hidden hover:shadow-md transition-shadow",value:String(e.id),children:[a.jsxs(AccordionTrigger,{className:"cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.nome_responsavel}),e.cargo&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 truncate",children:e.cargo})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-primary-50 text-primary-700 border border-primary-200 dark:bg-primary-600/10 dark:text-primary-300 dark:border-primary-700/40",children:[a.jsx(v.Z,{className:"w-3 h-3 mr-1"}),e.secretaria]})})]}),e.telefone1&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300 mt-2",children:[a.jsx(w.Z,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:e.telefone1})]})]}),a.jsx(AccordionContent,{className:"bg-gray-50 dark:bg-neutral-900/40",children:a.jsxs("div",{className:"space-y-3",children:[e.telefone1&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Telefones"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:r=>{r.stopPropagation(),handleCall(e.telefone1)},className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-neutral-700 transition-colors mobile-button",children:[a.jsx(w.Z,{className:"w-4 h-4"}),"Ligar"]}),a.jsx("button",{onClick:r=>{r.stopPropagation(),handleWhatsApp(e.telefone1)},className:"flex-1 flex items-center justify-center gap-2 py-2 px-3 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors mobile-button",children:"WhatsApp"})]}),e.telefone2&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300 pl-2",children:[a.jsx(w.Z,{className:"w-4 h-4"}),a.jsx("span",{children:e.telefone2})]})]}),e.email&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),a.jsxs("button",{onClick:r=>{r.stopPropagation(),handleEmail(e.email)},className:"w-full flex items-center gap-2 py-2 px-3 bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-neutral-700 transition-colors mobile-button",children:[a.jsx(k.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate",children:e.email})]})]}),e.observacoes&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Observa\xe7\xf5es"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200 leading-relaxed",children:e.observacoes})]})]})})]})},e.id))})})})]})})}},467:(e,r,t)=>{"use strict";t.d(r,{cn:()=>cn});var a=t(566),s=t(8126);function cn(...e){return(0,s.m6)((0,a.W)(e))}},7060:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>n,default:()=>l});var a=t(5153);let s=(0,a.createProxy)(String.raw`/workspaces/app-acessoria-parlamentar/src/app/contatos/page.tsx`),{__esModule:n,$$typeof:o}=s,i=s.default,l=i}};var r=require("../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[447,887,796,596,993,58,718,741,570,839,761,627],()=>__webpack_exec__(951));module.exports=t})();