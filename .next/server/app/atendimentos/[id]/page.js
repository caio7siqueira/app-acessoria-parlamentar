(()=>{var e={};e.id=999,e.ids=[999],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},681:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var t=r(7096),s=r(6132),l=r(7284),d=r.n(l),i=r(2564),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(a,n);let o=["",{children:["atendimentos",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9404)),"C:\\Users\\oi414024\\Documents\\Efizion\\app-parlamentar\\app-acessoria-parlamentar\\src\\app\\atendimentos\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2594)),"C:\\Users\\oi414024\\Documents\\Efizion\\app-parlamentar\\app-acessoria-parlamentar\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\oi414024\\Documents\\Efizion\\app-parlamentar\\app-acessoria-parlamentar\\src\\app\\atendimentos\\[id]\\page.tsx"],x="/atendimentos/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/atendimentos/[id]/page",pathname:"/atendimentos/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7987:(e,a,r)=>{Promise.resolve().then(r.bind(r,5380))},5380:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>AtendimentoDetalhePage});var t=r(784),s=r(9885),l=r(7114),d=r(212),i=r(3993),n=r(12),o=r(6658),c=r(5304),x=r(7040),m=r(7505),u=r(5718),b=r(6200),g=r(4409),p=r(6206);function ConfirmDialog({isOpen:e,onClose:a,onConfirm:r,title:s,description:l,confirmText:d="Confirmar",cancelText:i="Cancelar",variant:n="danger",isLoading:o=!1}){let handleCancel=()=>{o||a()},x={danger:{bg:"bg-red-50 dark:bg-red-900/10",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",titleColor:"text-red-900 dark:text-red-200",button:"bg-red-600 hover:bg-red-700 text-white dark:bg-red-700 dark:hover:bg-red-800"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/10",iconBg:"bg-yellow-100 dark:bg-yellow-900/30",iconColor:"text-yellow-600 dark:text-yellow-400",titleColor:"text-yellow-900 dark:text-yellow-200",button:"bg-yellow-600 hover:bg-yellow-700 text-white dark:bg-yellow-700 dark:hover:bg-yellow-800"},info:{bg:"bg-blue-50 dark:bg-blue-900/10",iconBg:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",titleColor:"text-blue-900 dark:text-blue-200",button:"bg-blue-600 hover:bg-blue-700 text-white dark:bg-blue-700 dark:hover:bg-blue-800"}}[n];return t.jsx(u.M,{children:e&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(b.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:handleCancel,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1200]","aria-hidden":"true"}),t.jsx("div",{className:"fixed inset-0 z-[1201] flex items-center justify-center p-4 pointer-events-none",children:t.jsx(b.E.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},onClick:e=>e.stopPropagation(),className:"pointer-events-auto w-full max-w-md",role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl overflow-hidden",children:[t.jsx("div",{className:`${x.bg} px-6 pt-6 pb-4`,children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`${x.iconBg} rounded-full p-3 flex-shrink-0`,children:t.jsx(g.Z,{className:`w-6 h-6 ${x.iconColor}`,"aria-hidden":"true"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("h2",{id:"dialog-title",className:`text-lg font-semibold ${x.titleColor}`,children:s})}),t.jsx("button",{onClick:handleCancel,disabled:o,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Fechar di\xe1logo",children:t.jsx(p.Z,{className:"w-5 h-5"})})]})}),t.jsx("div",{className:"px-6 py-4",children:t.jsx("p",{id:"dialog-description",className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed",children:l})}),(0,t.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-neutral-900/50 flex gap-3 justify-end",children:[t.jsx(c.z,{variant:"outline",onClick:handleCancel,disabled:o,className:"min-w-[100px] min-h-[44px] rounded-xl font-medium",children:i}),t.jsx(c.z,{onClick:()=>{o||r()},disabled:o,className:`${x.button} min-w-[100px] min-h-[44px] rounded-xl font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200`,children:o?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Excluindo..."]}):d})]})]})})})]})})}var h=r(7324),y=r(4752),k=r(4389),v=r(8973),j=r(9803),N=r(6303);function AtendimentoDetalhePage(){let e=(0,l.useParams)(),a=(0,l.useRouter)(),r=(0,d.NL)(),{showToast:u}=(0,k.p)(),g=Number(e?.id),{data:p,isLoading:f,isError:w}=(0,i.a)({queryKey:["atendimento",g],queryFn:()=>h.s.buscarPorId(g),enabled:Number.isFinite(g)}),{data:C}=(0,i.a)({queryKey:["atendimento",g,"historico"],queryFn:()=>h.s.buscarHistorico(g),enabled:Number.isFinite(g)}),[E,_]=(0,s.useState)(null),[S,A]=(0,s.useState)(""),[D,P]=(0,s.useState)(!1),O=p?.status==="Conclu\xeddo";(0,s.useEffect)(()=>{if(p){let{nome:e,genero:a,endereco:r,idade:t,telefone:s,solicitacao:l,prazo_data:d,prazo_urgencia:i,encaminhamento:n,secretaria:o,status:c,canal:x}=p;_({nome:e,genero:a,endereco:r,idade:t,telefone:s,solicitacao:l,prazo_data:d,prazo_urgencia:i,encaminhamento:n,secretaria:o,status:c,canal:x})}},[p]);let T=(0,n.D)({mutationFn:e=>h.s.atualizar(g,e),onSuccess:()=>{r.invalidateQueries({queryKey:["atendimento",g]}),u(v.X.SUCCESS.ATENDIMENTO_UPDATED,"success")},onError:e=>{let a=e?.message||v.X.ERROR.ATENDIMENTO_SAVE;A(a),u(a,"error")}}),q=(0,n.D)({mutationFn:()=>h.s.excluir(g),onSuccess:()=>{u(v.X.SUCCESS.ATENDIMENTO_DELETED,"success"),a.replace("/atendimentos")},onError:e=>u(e?.message||v.X.ERROR.ATENDIMENTO_DELETE,"error")}),onSubmit=async e=>{e.preventDefault(),E&&(A(""),await T.mutateAsync(E))},handleDeleteConfirm=async()=>{await q.mutateAsync(),P(!1)};return Number.isFinite(g)?t.jsx(o.c,{children:(0,t.jsxs)("div",{className:"space-y-6 pb-safe",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["Atendimento #",g]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Visualize e edite os detalhes do atendimento"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx(b.E.div,{whileTap:{scale:.95},transition:{duration:.2},children:(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>{"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(10),a.back()},className:"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-neutral-700 dark:text-gray-200 dark:hover:bg-neutral-600 active:scale-95 transition-all duration-200 ease-in-out rounded-xl px-4 py-2 text-sm font-medium flex items-center gap-2 min-h-[44px]","aria-label":"Voltar para lista de atendimentos",children:[t.jsx(j.Z,{className:"w-4 h-4"}),"Voltar"]})}),t.jsx(b.E.div,{whileTap:{scale:.95},transition:{duration:.2},children:(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>{"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(10),P(!0)},disabled:q.isPending,className:"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50 active:scale-95 transition-all duration-200 ease-in-out rounded-xl px-4 py-2 text-sm font-medium flex items-center gap-2 min-h-[44px] disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Excluir atendimento",children:[t.jsx(N.Z,{className:"w-4 h-4"}),"Excluir"]})})]})]}),f||!E?(0,t.jsxs)("div",{className:"bg-white dark:bg-neutral-800 shadow rounded-lg p-6 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:v.X.INFO.LOADING})]}):w?t.jsx(x.Zb,{className:"p-6",children:v.X.ERROR.ATENDIMENTO_LOAD}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(x.Zb,{className:"p-6 lg:col-span-2 dark:bg-neutral-800 dark:border-neutral-700",children:[O&&(0,t.jsxs)("div",{className:"mb-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300 px-4 py-2 rounded",children:["ⓘ ",v.X.WARNING.ATENDIMENTO_CONCLUIDO]}),S&&t.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 px-4 py-2 rounded",children:S}),(0,t.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:onSubmit,children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome"}),t.jsx(m.I,{value:E.nome,onChange:e=>_({...E,nome:e.target.value}),required:!0,disabled:O,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"G\xeanero"}),(0,t.jsxs)("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:E.genero,onChange:e=>_({...E,genero:e.target.value}),disabled:O,children:[t.jsx("option",{children:"Masculino"}),t.jsx("option",{children:"Feminino"}),t.jsx("option",{children:"N\xe3o informado"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Endere\xe7o"}),t.jsx(m.I,{value:E.endereco,onChange:e=>_({...E,endereco:e.target.value}),disabled:O,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Idade"}),t.jsx(m.I,{type:"number",value:E.idade||"",onChange:e=>_({...E,idade:Number(e.target.value)}),disabled:O,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telefone"}),t.jsx(m.I,{value:E.telefone||"",onChange:e=>_({...E,telefone:e.target.value}),disabled:O,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Solicita\xe7\xe3o"}),t.jsx("textarea",{className:"block w-full border border-gray-300 dark:border-neutral-600 rounded-md p-2 text-sm dark:bg-neutral-700 dark:text-gray-100",rows:3,value:E.solicitacao,onChange:e=>_({...E,solicitacao:e.target.value}),disabled:O})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prazo (data)"}),t.jsx(m.I,{type:"date",value:E.prazo_data||"",onChange:e=>_({...E,prazo_data:e.target.value}),disabled:O,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Urg\xeancia"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:E.prazo_urgencia,onChange:e=>_({...E,prazo_urgencia:e.target.value}),disabled:O,children:y.Qr.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Encaminhamento"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:E.encaminhamento,onChange:e=>_({...E,encaminhamento:e.target.value}),disabled:O,children:y.Sv.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secretaria"}),(0,t.jsxs)("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:E.secretaria||"",onChange:e=>_({...E,secretaria:e.target.value}),disabled:O,children:[t.jsx("option",{value:"",children:"N\xe3o se aplica"}),y.At.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:E.status,onChange:e=>_({...E,status:e.target.value}),children:y.CX.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Canal"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:E.canal,onChange:e=>_({...E,canal:e.target.value}),disabled:O,children:y.n$.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsx("div",{className:"md:col-span-2 flex justify-end gap-2",children:t.jsx(c.z,{type:"submit",disabled:T.isLoading||O,className:"min-h-[44px]",children:T.isLoading?v.X.INFO.SAVING:"Salvar altera\xe7\xf5es"})})]})]}),(0,t.jsxs)(x.Zb,{className:"p-6 dark:bg-neutral-800 dark:border-neutral-700",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-gray-100",children:"Hist\xf3rico"}),C&&0!==C.length?t.jsx("ul",{className:"space-y-3",children:C.map(e=>(0,t.jsxs)("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:e.campo_alterado}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.data_hora).toLocaleString()})]}),e.valor_anterior&&e.valor_novo&&(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[e.valor_anterior," → ",e.valor_novo]})]},e.id))}):t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.X.INFO.NO_HISTORY})]})]}),t.jsx(ConfirmDialog,{isOpen:D,onClose:()=>P(!1),onConfirm:handleDeleteConfirm,title:"Excluir Atendimento",description:"Tem certeza que deseja excluir este atendimento? Esta a\xe7\xe3o n\xe3o pode ser desfeita e todos os dados relacionados (hist\xf3rico e notifica\xe7\xf5es) ser\xe3o permanentemente removidos.",confirmText:"Sim, excluir",cancelText:"Cancelar",variant:"danger",isLoading:q.isPending})]})}):null}},4752:(e,a,r)=>{"use strict";r.d(a,{At:()=>t,CX:()=>s,Qr:()=>l,Sv:()=>i,n$:()=>d});let t=["Secretaria de Sa\xfade","Secretaria de Educa\xe7\xe3o","Secretaria de Assist\xeancia Social","Secretaria de Obras","Secretaria de Meio Ambiente","Secretaria de Transporte","Secretaria de Cultura","Secretaria de Esporte"],s=["Pendente","Em Andamento","Conclu\xeddo","Cancelado"],l=["Baixa","M\xe9dia","Alta","Urgente"],d=["Presencial","Telefone","WhatsApp","E-mail","Outro"],i=["Secretaria","Informa\xe7\xe3o","Orienta\xe7\xe3o","Outro"]},9404:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>d,__esModule:()=>l,default:()=>n});var t=r(5153);let s=(0,t.createProxy)(String.raw`C:\Users\oi414024\Documents\Efizion\app-parlamentar\app-acessoria-parlamentar\src\app\atendimentos\[id]\page.tsx`),{__esModule:l,$$typeof:d}=s,i=s.default,n=i}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[361,80,887,596,993,544,12,662,570,111,215,761,505,973,324],()=>__webpack_exec__(681));module.exports=r})();