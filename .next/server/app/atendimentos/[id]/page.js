(()=>{var e={};e.id=999,e.ids=[999],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6304:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var t=r(7096),s=r(6132),l=r(7284),d=r.n(l),n=r(2564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(a,i);let o=["",{children:["atendimentos",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9404)),"/workspaces/app-acessoria-parlamentar/src/app/atendimentos/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2594)),"/workspaces/app-acessoria-parlamentar/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/app-acessoria-parlamentar/src/app/atendimentos/[id]/page.tsx"],x="/atendimentos/[id]/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/atendimentos/[id]/page",pathname:"/atendimentos/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3561:(e,a,r)=>{Promise.resolve().then(r.bind(r,830))},830:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>AtendimentoDetalhePage});var t=r(784),s=r(9885),l=r(7114),d=r(212),n=r(3993),i=r(12),o=r(6658),c=r(5304),x=r(7040),u=r(7505),m=r(7324),b=r(4752),g=r(4389),p=r(8973),h=r(6243),y=r(3528);let k=(0,y.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),v=(0,y.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function AtendimentoDetalhePage(){let e=(0,l.useParams)(),a=(0,l.useRouter)(),r=(0,d.NL)(),{showToast:y}=(0,g.p)(),N=Number(e?.id),{data:j,isLoading:f,isError:E}=(0,n.a)({queryKey:["atendimento",N],queryFn:()=>m.s.buscarPorId(N),enabled:Number.isFinite(N)}),{data:_}=(0,n.a)({queryKey:["atendimento",N,"historico"],queryFn:()=>m.s.buscarHistorico(N),enabled:Number.isFinite(N)}),[w,S]=(0,s.useState)(null),[A,C]=(0,s.useState)(""),T=j?.status==="Conclu\xeddo";(0,s.useEffect)(()=>{if(j){let{nome:e,genero:a,endereco:r,idade:t,telefone:s,solicitacao:l,prazo_data:d,prazo_urgencia:n,encaminhamento:i,secretaria:o,status:c,canal:x}=j;S({nome:e,genero:a,endereco:r,idade:t,telefone:s,solicitacao:l,prazo_data:d,prazo_urgencia:n,encaminhamento:i,secretaria:o,status:c,canal:x})}},[j]);let I=(0,i.D)({mutationFn:e=>m.s.atualizar(N,e),onSuccess:()=>{r.invalidateQueries({queryKey:["atendimento",N]}),y(p.X.SUCCESS.ATENDIMENTO_UPDATED,"success")},onError:e=>{let a=e?.message||p.X.ERROR.ATENDIMENTO_SAVE;C(a),y(a,"error")}}),O=(0,i.D)({mutationFn:()=>m.s.excluir(N),onSuccess:()=>{y(p.X.SUCCESS.ATENDIMENTO_DELETED,"success"),a.replace("/atendimentos")},onError:e=>y(e?.message||p.X.ERROR.ATENDIMENTO_DELETE,"error")}),onSubmit=async e=>{e.preventDefault(),w&&(C(""),await I.mutateAsync(w))},handleDelete=async()=>{confirm(p.X.WARNING.CONFIRM_DELETE_ATENDIMENTO)&&("undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(10),await O.mutateAsync())};return Number.isFinite(N)?t.jsx(o.c,{children:(0,t.jsxs)("div",{className:"space-y-6 pb-safe",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["Atendimento #",N]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Visualize e edite os detalhes do atendimento"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx(h.E.div,{whileTap:{scale:.95},transition:{duration:.2},children:(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>{"undefined"!=typeof navigator&&navigator.vibrate&&navigator.vibrate(10),a.back()},className:"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-neutral-700 dark:text-gray-200 dark:hover:bg-neutral-600 active:scale-95 transition-all duration-200 ease-in-out rounded-xl px-4 py-2 text-sm font-medium flex items-center gap-2 min-h-[44px]","aria-label":"Voltar para lista de atendimentos",children:[t.jsx(k,{className:"w-4 h-4"}),"Voltar"]})}),t.jsx(h.E.div,{whileTap:{scale:.95},transition:{duration:.2},children:(0,t.jsxs)(c.z,{variant:"outline",onClick:handleDelete,className:"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50 active:scale-95 transition-all duration-200 ease-in-out rounded-xl px-4 py-2 text-sm font-medium flex items-center gap-2 min-h-[44px]","aria-label":"Excluir atendimento",children:[t.jsx(v,{className:"w-4 h-4"}),"Excluir"]})})]})]}),f||!w?(0,t.jsxs)("div",{className:"bg-white dark:bg-neutral-800 shadow rounded-lg p-6 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:p.X.INFO.LOADING})]}):E?t.jsx(x.Zb,{className:"p-6",children:p.X.ERROR.ATENDIMENTO_LOAD}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(x.Zb,{className:"p-6 lg:col-span-2 dark:bg-neutral-800 dark:border-neutral-700",children:[T&&(0,t.jsxs)("div",{className:"mb-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 text-blue-700 dark:text-blue-300 px-4 py-2 rounded",children:["ⓘ ",p.X.WARNING.ATENDIMENTO_CONCLUIDO]}),A&&t.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 px-4 py-2 rounded",children:A}),(0,t.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:onSubmit,children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome"}),t.jsx(u.I,{value:w.nome,onChange:e=>S({...w,nome:e.target.value}),required:!0,disabled:T,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"G\xeanero"}),(0,t.jsxs)("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:w.genero,onChange:e=>S({...w,genero:e.target.value}),disabled:T,children:[t.jsx("option",{children:"Masculino"}),t.jsx("option",{children:"Feminino"}),t.jsx("option",{children:"N\xe3o informado"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Endere\xe7o"}),t.jsx(u.I,{value:w.endereco,onChange:e=>S({...w,endereco:e.target.value}),disabled:T,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Idade"}),t.jsx(u.I,{type:"number",value:w.idade||"",onChange:e=>S({...w,idade:Number(e.target.value)}),disabled:T,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telefone"}),t.jsx(u.I,{value:w.telefone||"",onChange:e=>S({...w,telefone:e.target.value}),disabled:T,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Solicita\xe7\xe3o"}),t.jsx("textarea",{className:"block w-full border border-gray-300 dark:border-neutral-600 rounded-md p-2 text-sm dark:bg-neutral-700 dark:text-gray-100",rows:3,value:w.solicitacao,onChange:e=>S({...w,solicitacao:e.target.value}),disabled:T})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prazo (data)"}),t.jsx(u.I,{type:"date",value:w.prazo_data||"",onChange:e=>S({...w,prazo_data:e.target.value}),disabled:T,className:"dark:bg-neutral-700 dark:border-neutral-600 dark:text-gray-100"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Urg\xeancia"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:w.prazo_urgencia,onChange:e=>S({...w,prazo_urgencia:e.target.value}),disabled:T,children:b.Qr.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Encaminhamento"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:w.encaminhamento,onChange:e=>S({...w,encaminhamento:e.target.value}),disabled:T,children:b.Sv.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secretaria"}),(0,t.jsxs)("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:w.secretaria||"",onChange:e=>S({...w,secretaria:e.target.value}),disabled:T,children:[t.jsx("option",{value:"",children:"N\xe3o se aplica"}),b.At.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:w.status,onChange:e=>S({...w,status:e.target.value}),children:b.CX.map(e=>t.jsx("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Canal"}),t.jsx("select",{className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 dark:text-gray-100",value:w.canal,onChange:e=>S({...w,canal:e.target.value}),disabled:T,children:b.n$.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsx("div",{className:"md:col-span-2 flex justify-end gap-2",children:t.jsx(c.z,{type:"submit",disabled:I.isLoading||T,className:"min-h-[44px]",children:I.isLoading?p.X.INFO.SAVING:"Salvar altera\xe7\xf5es"})})]})]}),(0,t.jsxs)(x.Zb,{className:"p-6 dark:bg-neutral-800 dark:border-neutral-700",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-gray-100",children:"Hist\xf3rico"}),_&&0!==_.length?t.jsx("ul",{className:"space-y-3",children:_.map(e=>(0,t.jsxs)("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:e.campo_alterado}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.data_hora).toLocaleString()})]}),e.valor_anterior&&e.valor_novo&&(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[e.valor_anterior," → ",e.valor_novo]})]},e.id))}):t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.X.INFO.NO_HISTORY})]})]})]})}):null}},4752:(e,a,r)=>{"use strict";r.d(a,{At:()=>t,CX:()=>s,Qr:()=>l,Sv:()=>n,n$:()=>d});let t=["Secretaria de Sa\xfade","Secretaria de Educa\xe7\xe3o","Secretaria de Assist\xeancia Social","Secretaria de Obras","Secretaria de Meio Ambiente","Secretaria de Transporte","Secretaria de Cultura","Secretaria de Esporte"],s=["Pendente","Em Andamento","Conclu\xeddo","Cancelado"],l=["Baixa","M\xe9dia","Alta","Urgente"],d=["Presencial","Telefone","WhatsApp","E-mail","Outro"],n=["Secretaria","Informa\xe7\xe3o","Orienta\xe7\xe3o","Outro"]},9404:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>d,__esModule:()=>l,default:()=>i});var t=r(5153);let s=(0,t.createProxy)(String.raw`/workspaces/app-acessoria-parlamentar/src/app/atendimentos/[id]/page.tsx`),{__esModule:l,$$typeof:d}=s,n=s.default,i=n}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[447,887,796,511,596,993,58,12,570,839,761,215,505,324,973],()=>__webpack_exec__(6304));module.exports=r})();