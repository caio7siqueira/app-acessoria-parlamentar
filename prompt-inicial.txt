PROMPT COMPLETO â€” para GitHub Copilot no VSCode

InstruÃ§Ã£o: Gere todo o projeto web (do zero) conforme as especificaÃ§Ãµes abaixo, usando o repositÃ³rio base https://github.com/caio7siqueira/app-acessoria-parlamentar.
O Copilot deve criar todas as pastas, dependÃªncias, scripts, banco (Supabase), lÃ³gica, componentes e documentaÃ§Ã£o conforme melhores prÃ¡ticas, priorizando performance, UX mobile-first e baixo custo.
O deploy serÃ¡ feito na Vercel e o armazenamento/identidade no Supabase.
O app deve ser um PWA responsivo, 100% funcional em iPhone/iPad via navegador Safari.

ğŸ”§ 1. STACK E CONFIGURAÃ‡Ã•ES BASE

Frontend: Next.js (App Router) + TypeScript

UI: Tailwind CSS + shadcn/ui + Lucide Icons

Auth & DB: Supabase (Postgres + Supabase Auth)

State/Data: React Query (TanStack Query)

Charts: Recharts

PDF/Excel export: pdfkit + exceljs

Notifications: Supabase Realtime + Web Push (VAPID + browser API)

Infra:

Deploy automÃ¡tico no Vercel

Banco Supabase (schema SQL + seeds automÃ¡ticos)

.env.example com todas variÃ¡veis de ambiente

CI/CD: GitHub Actions (lint, test, build, deploy)

Testes: Jest + React Testing Library + Playwright

CÃ³digo: Eslint + Prettier + Husky (pre-commit hook)

ğŸ“ 2. ESTRUTURA DE PASTAS

O Copilot deve criar a seguinte estrutura (e preencher os arquivos principais):

/
â”œâ”€ apps/web/
â”‚  â”œâ”€ public/
â”‚  â”‚  â”œâ”€ icons/
â”‚  â”‚  â””â”€ manifest.json     # PWA config
â”‚  â”œâ”€ src/
â”‚  â”‚  â”œâ”€ app/
â”‚  â”‚  â”‚  â”œâ”€ layout.tsx
â”‚  â”‚  â”‚  â”œâ”€ page.tsx (Dashboard principal)
â”‚  â”‚  â”‚  â”œâ”€ atendimentos/
â”‚  â”‚  â”‚  â”‚  â”œâ”€ page.tsx
â”‚  â”‚  â”‚  â”‚  â”œâ”€ novo/
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ page.tsx
â”‚  â”‚  â”‚  â”‚  â””â”€ [id]/
â”‚  â”‚  â”‚  â”‚     â””â”€ page.tsx
â”‚  â”‚  â”‚  â”œâ”€ contatos/
â”‚  â”‚  â”‚  â”œâ”€ relatorios/
â”‚  â”‚  â”‚  â””â”€ configuracoes/
â”‚  â”‚  â”œâ”€ components/
â”‚  â”‚  â”‚  â”œâ”€ ui/
â”‚  â”‚  â”‚  â”œâ”€ forms/
â”‚  â”‚  â”‚  â”œâ”€ charts/
â”‚  â”‚  â”‚  â””â”€ layout/
â”‚  â”‚  â”œâ”€ services/
â”‚  â”‚  â”‚  â”œâ”€ supabaseClient.ts
â”‚  â”‚  â”‚  â”œâ”€ atendimentosService.ts
â”‚  â”‚  â”‚  â”œâ”€ contatosService.ts
â”‚  â”‚  â”‚  â”œâ”€ relatoriosService.ts
â”‚  â”‚  â”‚  â””â”€ notificacoesService.ts
â”‚  â”‚  â”œâ”€ hooks/
â”‚  â”‚  â”œâ”€ lib/
â”‚  â”‚  â”œâ”€ utils/
â”‚  â”‚  â”œâ”€ styles/
â”‚  â”‚  â””â”€ tests/
â”œâ”€ infra/
â”‚  â”œâ”€ supabase/
â”‚  â”‚  â”œâ”€ migrations/
â”‚  â”‚  â”‚  â””â”€ 001_init.sql
â”‚  â”‚  â””â”€ seeds/
â”‚  â”‚     â””â”€ demo_data.sql
â”œâ”€ .github/workflows/
â”‚  â””â”€ ci.yml
â”œâ”€ docs/
â”‚  â”œâ”€ README.md
â”‚  â”œâ”€ DEPLOY.md
â”‚  â””â”€ SUPABASE-SETUP.md
â”œâ”€ .env.example
â”œâ”€ package.json
â””â”€ tsconfig.json

ğŸ§© 3. FUNCIONALIDADES PRINCIPAIS (QUE DEVEM SER IMPLEMENTADAS)
3.1 Atendimentos

CRUD completo (criar, listar, editar, excluir)

Campos obrigatÃ³rios conforme escopo (nome, gÃªnero, endereÃ§o, telefone, etc.)

MÃ¡scara para telefone e data

Selects dinÃ¢micos (secretaria condicionada a â€œencaminhamento = Secretariaâ€)

Filtros avanÃ§ados: status, urgÃªncia, secretaria, canal, perÃ­odo, busca por nome

HistÃ³rico automÃ¡tico de alteraÃ§Ãµes

GrÃ¡ficos: atendimentos por canal, secretaria, status e urgÃªncia

PaginaÃ§Ã£o, ordenaÃ§Ã£o e loading skeletons

3.2 Lembretes & NotificaÃ§Ãµes

Backend job (API route /api/notifications/check) que roda via CRON (Vercel Scheduler)

Detecta prazos vencidos ou urgentes e dispara Web Push

ConfiguraÃ§Ãµes por usuÃ¡rio (horÃ¡rio e tipo de notificaÃ§Ã£o)

3.3 Agenda de Contatos

CRUD de contatos das secretarias

Busca e filtro por nome

AÃ§Ãµes rÃ¡pidas (copiar nÃºmero, abrir WhatsApp)

3.4 RelatÃ³rios

Gerar relatÃ³rios:

Por perÃ­odo, secretaria, encaminhamento e urgÃªncia

Exportar PDF e Excel (download direto via API)

Layout de PDF padronizado com logotipo, cabeÃ§alho e tabela

3.5 Dashboard

Cards: total atendimentos, urgentes, prÃ³ximos do prazo

GrÃ¡ficos (barras e pizza)

Responsivo (breakpoints Tailwind)

AtualizaÃ§Ã£o em tempo real via Supabase Realtime

3.6 AutenticaÃ§Ã£o e seguranÃ§a

Login (email/senha) com Supabase Auth

Controle de sessÃ£o persistente

Logout e expiraÃ§Ã£o de sessÃ£o inativa

ProteÃ§Ã£o de rotas (middleware no Next.js)

Somente usuÃ¡rios ativos podem acessar

ğŸ—ƒï¸ 4. SCHEMA SQL (para gerar infra/supabase/migrations/001_init.sql)
CREATE TABLE usuarios (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  role TEXT DEFAULT 'assessora',
  ativo BOOLEAN DEFAULT TRUE,
  criado_em TIMESTAMPTZ DEFAULT now()
);

CREATE TABLE atendimentos (
  id BIGSERIAL PRIMARY KEY,
  nome TEXT NOT NULL,
  genero TEXT NOT NULL,
  endereco TEXT NOT NULL,
  idade INT,
  telefone TEXT,
  solicitacao TEXT NOT NULL,
  prazo_data DATE,
  prazo_urgencia TEXT NOT NULL,
  encaminhamento TEXT NOT NULL,
  secretaria TEXT,
  status TEXT DEFAULT 'Pendente',
  canal TEXT NOT NULL,
  usuario_criacao UUID REFERENCES usuarios(id),
  data_criacao TIMESTAMPTZ DEFAULT now(),
  data_atualizacao TIMESTAMPTZ DEFAULT now()
);

CREATE TABLE historico (
  id BIGSERIAL PRIMARY KEY,
  id_atendimento BIGINT REFERENCES atendimentos(id) ON DELETE CASCADE,
  usuario UUID REFERENCES usuarios(id),
  campo_alterado TEXT,
  valor_anterior TEXT,
  valor_novo TEXT,
  data_hora TIMESTAMPTZ DEFAULT now()
);

CREATE TABLE contatos (
  id BIGSERIAL PRIMARY KEY,
  secretaria TEXT NOT NULL,
  nome_responsavel TEXT NOT NULL,
  cargo TEXT,
  telefone1 TEXT,
  telefone2 TEXT,
  email TEXT,
  observacoes TEXT
);


Criar triggers para atualizar data_atualizacao e registrar automaticamente histÃ³rico de mudanÃ§as (via funÃ§Ã£o PL/pgSQL).

ğŸŒ 5. REQUISITOS DE UX/UI

Layout minimalista, profissional e rÃ¡pido (Tailwind + shadcn/ui)

Tema claro com tons azul/cinza/branco

Navbar fixa + menu lateral colapsÃ¡vel

Design mobile-first

Inputs grandes e legÃ­veis no iPhone

BotÃµes de aÃ§Ã£o sempre acessÃ­veis (inferior no mobile)

Feedback visual em todas aÃ§Ãµes (toast, spinner, skeleton)

PWA completo (manifest + service worker + add-to-home-screen)

ğŸš€ 6. DEPLOY E CONFIGURAÃ‡ÃƒO AUTOMÃTICA

O Copilot deve gerar:

docs/SUPABASE-SETUP.md: instruÃ§Ãµes para criar projeto, configurar .env, importar SQL.

docs/DEPLOY.md: deploy no Vercel, incluindo variÃ¡veis e cron job.

scripts/seed.ts: insere dados de exemplo no Supabase.

scripts/exportPdf.ts e scripts/exportExcel.ts: geraÃ§Ã£o de relatÃ³rios.

âœ… 7. TESTES E QUALIDADE

Testes unitÃ¡rios para services e hooks

Testes e2e bÃ¡sicos de login e CRUD (Playwright)

Lint e Type Check obrigatÃ³rios em CI

Commits seguindo Conventional Commits

CI/CD (GitHub Actions) executando:

npm run lint

npm run test

npm run build

Deploy na Vercel apÃ³s sucesso

âš™ï¸ 8. ENTREGÃVEIS FINAIS (que o Copilot deve gerar)

Estrutura completa do projeto conforme acima

CÃ³digo funcional do app (Next.js + Supabase + Tailwind)

Arquivo SQL inicial de migraÃ§Ã£o (infra/supabase/migrations/001_init.sql)

DocumentaÃ§Ãµes (README.md, DEPLOY.md, SUPABASE-SETUP.md)

Scripts automÃ¡ticos (seed, lint, test, export, deploy)

ConfiguraÃ§Ã£o de CI/CD e Husky

PWA configurado e validado para iOS (Safari)

ğŸ§­ 9. TOM E ESTILO DO CÃ“DIGO

ComentÃ¡rios explicativos em portuguÃªs claro

Nomes de variÃ¡veis e funÃ§Ãµes em inglÃªs

FunÃ§Ãµes e componentes curtos e coesos

CÃ³digo limpo, modular e escalÃ¡vel

Aplicar boas prÃ¡ticas de performance (memoizaÃ§Ã£o, suspense, lazy load)

ğŸ’¬ 10. AÃ‡ÃƒO FINAL

Gere automaticamente todos os arquivos, scripts e documentaÃ§Ã£o acima, populando o repositÃ³rio app-acessoria-parlamentar com a estrutura e cÃ³digo funcional do sistema completo, pronto para deploy na Vercel.